

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.2.12. patsy.NAAction &mdash; Patsy API v1</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Patsy API v1" href="../../index.html"/>
        <link rel="up" title="1. patsy" href="../patsy.html"/>
        <link rel="next" title="1.2.12.1.1. patsy.NAAction.__init__" href="patsy.NAAction.__init__.html"/>
        <link rel="prev" title="1.2.11.1.3. patsy.ModelDesc.from_formula" href="patsy.ModelDesc.from_formula.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Patsy API
          

          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../patsy.html">1. patsy</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../patsy.html#functions">1.1. Functions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../patsy.html#classes">1.2. Classes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="patsy.ContrastMatrix.html">1.2.1. patsy.ContrastMatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.DesignInfo.html">1.2.2. patsy.DesignInfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.DesignMatrix.html">1.2.3. patsy.DesignMatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.Diff.html">1.2.4. patsy.Diff</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.EvalEnvironment.html">1.2.5. patsy.EvalEnvironment</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.EvalFactor.html">1.2.6. patsy.EvalFactor</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.FactorInfo.html">1.2.7. patsy.FactorInfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.Helmert.html">1.2.8. patsy.Helmert</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.LinearConstraint.html">1.2.9. patsy.LinearConstraint</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.LookupFactor.html">1.2.10. patsy.LookupFactor</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.ModelDesc.html">1.2.11. patsy.ModelDesc</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">1.2.12. patsy.NAAction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#methods">1.2.12.1. Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="patsy.Origin.html">1.2.13. patsy.Origin</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.Poly.html">1.2.14. patsy.Poly</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.SubtermInfo.html">1.2.15. patsy.SubtermInfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.Sum.html">1.2.16. patsy.Sum</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.Term.html">1.2.17. patsy.Term</a></li>
<li class="toctree-l3"><a class="reference internal" href="patsy.Treatment.html">1.2.18. patsy.Treatment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../patsy.html#exceptions">1.3. Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../patsy.builtins.html">2. patsy.builtins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../patsy.categorical.html">3. patsy.categorical</a></li>
<li class="toctree-l1"><a class="reference internal" href="../patsy.infix_parser.html">4. patsy.infix_parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../patsy.parse_formula.html">5. patsy.parse_formula</a></li>
<li class="toctree-l1"><a class="reference internal" href="../patsy.tokens.html">6. patsy.tokens</a></li>
<li class="toctree-l1"><a class="reference internal" href="../patsy.util.html">7. patsy.util</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Patsy API</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../api.html">&lt;no title&gt;</a> &raquo;</li>
        
          <li><a href="../patsy.html">1. patsy</a> &raquo;</li>
        
      <li>1.2.12. patsy.NAAction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/generated/generated/patsy.NAAction.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="patsy-naaction">
<h1>1.2.12. patsy.NAAction<a class="headerlink" href="#patsy-naaction" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="patsy.NAAction">
<em class="property">class </em><code class="descclassname">patsy.</code><code class="descname">NAAction</code><span class="sig-paren">(</span><em>on_NA='drop', NA_types=['None', 'NaN']</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/patsy/missing.html#NAAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#patsy.NAAction" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference internal" href="#patsy.NAAction" title="patsy.NAAction"><code class="xref py py-class docutils literal"><span class="pre">NAAction</span></code></a> object defines a strategy for handling missing
data.</p>
<p>&#8220;NA&#8221; is short for &#8220;Not Available&#8221;, and is used to refer to any value which
is somehow unmeasured or unavailable. In the long run, it is devoutly
hoped that numpy will gain first-class missing value support. Until then,
we work around this lack as best we&#8217;re able.</p>
<p>There are two parts to this: First, we have to determine what counts as
missing data. For numerical data, the default is to treat NaN values
(e.g., <code class="docutils literal"><span class="pre">numpy.nan</span></code>) as missing. For categorical data, the default is to
treat NaN values, and also the Python object None, as missing. (This is
consistent with how pandas does things, so if you&#8217;re already using
None/NaN to mark missing data in your pandas DataFrames, you&#8217;re good to
go.)</p>
<p>Second, we have to decide what to do with any missing data when we
encounter it. One option is to simply discard any rows which contain
missing data from our design matrices (<code class="docutils literal"><span class="pre">drop</span></code>). Another option is to
raise an error (<code class="docutils literal"><span class="pre">raise</span></code>). A third option would be to simply let the
missing values pass through into the returned design matrices. However,
this last option is not yet implemented, because of the lack of any
standard way to represent missing values in arbitrary numpy matrices;
we&#8217;re hoping numpy will get this sorted out before we standardize on
anything ourselves.</p>
<p>You can control how patsy handles missing data through the <code class="docutils literal"><span class="pre">NA_action=</span></code>
argument to functions like <a class="reference internal" href="../patsy.build_design_matrices.html#patsy.build_design_matrices" title="patsy.build_design_matrices"><code class="xref py py-func docutils literal"><span class="pre">build_design_matrices()</span></code></a> and
<a class="reference internal" href="../patsy.dmatrix.html#patsy.dmatrix" title="patsy.dmatrix"><code class="xref py py-func docutils literal"><span class="pre">dmatrix()</span></code></a>. If all you want to do is to choose between <code class="docutils literal"><span class="pre">drop</span></code> and
<code class="docutils literal"><span class="pre">raise</span></code> behaviour, you can pass one of those strings as the
<code class="docutils literal"><span class="pre">NA_action=</span></code> argument directly. If you want more fine-grained control
over how missing values are detected and handled, then you can create an
instance of this class, or your own object that implements the same
interface, and pass that as the <code class="docutils literal"><span class="pre">NA_action=</span></code> argument instead.</p>
<dl class="method">
<dt id="patsy.NAAction.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>on_NA='drop', NA_types=['None', 'NaN']</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/patsy/missing.html#NAAction.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#patsy.NAAction.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#patsy.NAAction" title="patsy.NAAction"><code class="xref py py-class docutils literal"><span class="pre">NAAction</span></code></a> constructor takes the following arguments:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>on_NA</strong> &#8211; How to handle missing values. The default is <code class="docutils literal"><span class="pre">&quot;drop&quot;</span></code>,
which removes all rows from all matrices which contain any missing
values. Also available is <code class="docutils literal"><span class="pre">&quot;raise&quot;</span></code>, which raises an exception
when any missing values are encountered.</li>
<li><strong>NA_types</strong> &#8211; <p>Which rules are used to identify missing values, as a
list of strings. Allowed values are:</p>
<ul>
<li><code class="docutils literal"><span class="pre">&quot;None&quot;</span></code>: treat the <code class="docutils literal"><span class="pre">None</span></code> object as missing in categorical
data.</li>
<li><code class="docutils literal"><span class="pre">&quot;NaN&quot;</span></code>: treat floating point NaN values as missing in
categorical and numerical data.</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.2.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<div class="section" id="methods">
<h2>1.2.12.1. Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="patsy.NAAction.__init__.html#patsy.NAAction.__init__" title="patsy.NAAction.__init__"><code class="xref py py-obj docutils literal"><span class="pre">__init__</span></code></a>([on_NA,&nbsp;NA_types])</td>
<td>The <a class="reference internal" href="#patsy.NAAction" title="patsy.NAAction"><code class="xref py py-class docutils literal"><span class="pre">NAAction</span></code></a> constructor takes the following arguments:</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="patsy.NAAction.handle_NA.html#patsy.NAAction.handle_NA" title="patsy.NAAction.handle_NA"><code class="xref py py-obj docutils literal"><span class="pre">handle_NA</span></code></a>(values,&nbsp;is_NAs,&nbsp;origins)</td>
<td>Takes a set of factor values that may have NAs, and handles them appropriately.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="patsy.NAAction.is_categorical_NA.html#patsy.NAAction.is_categorical_NA" title="patsy.NAAction.is_categorical_NA"><code class="xref py py-obj docutils literal"><span class="pre">is_categorical_NA</span></code></a>(obj)</td>
<td>Return True if <cite>obj</cite> is a categorical NA value.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="patsy.NAAction.is_numerical_NA.html#patsy.NAAction.is_numerical_NA" title="patsy.NAAction.is_numerical_NA"><code class="xref py py-obj docutils literal"><span class="pre">is_numerical_NA</span></code></a>(arr)</td>
<td>Returns a 1-d mask array indicating which rows in an array of numerical values contain at least one NA value.</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="patsy.NAAction.__init__.html" class="btn btn-neutral float-right" title="1.2.12.1.1. patsy.NAAction.__init__" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="patsy.ModelDesc.from_formula.html" class="btn btn-neutral" title="1.2.11.1.3. patsy.ModelDesc.from_formula" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>